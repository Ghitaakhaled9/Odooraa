<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!--Bootstrap 5 icons CDN-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <title>Gestion des gérants</title>

    <link rel="stylesheet" href="styles/style.css">

    <link rel="stylesheet" type="text/css" href="styles/bootstrap4/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="styles/bootstrap4/bootstrap.min.css">
    <link href="plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/owl.carousel.css">
    <link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/owl.theme.default.css">
    <link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/animate.css">

</head>
<body>


<div class="super_container">

    <!-- Header -->

    <header class="header trans_300">

        <!-- Top Navigation -->

        <div class="top_nav">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <div class="top_nav_left">free shipping on all MA orders over $50</div>
                    </div>
                    <div class="col-md-6 text-right">
                        <div class="top_nav_right">
                            <ul class="top_nav_menu">

                                <!-- Currency / Language / My Account -->

                                <li class="currency">
                                    <a href="#">
                                        MAD
                                        <i class="fa fa-angle-down"></i>
                                    </a>
                                    <ul class="currency_selection">
                                        <li><a href="#">usd</a></li>
                                        <li><a href="#">aud</a></li>
                                        <li><a href="#">eur</a></li>
                                        <li><a href="#">gbp</a></li>
                                    </ul>
                                </li>
                                <li class="language">
                                    <a href="#">
                                        English
                                        <i class="fa fa-angle-down"></i>
                                    </a>
                                    <ul class="language_selection">
                                        <li><a href="#">French</a></li>
                                        <li><a href="#">Italian</a></li>
                                        <li><a href="#">German</a></li>
                                        <li><a href="#">Spanish</a></li>
                                    </ul>
                                </li>
                                <li class="account">
                                    <a href="#">
                                        My Account
                                        <i class="fa fa-angle-down"></i>
                                    </a>
                                    <ul class="account_selection">
                                        <li><a href="#"><i class="fa fa-sign-in" aria-hidden="true"></i>Sign In</a></li>
                                        <li><a href="#"><i class="fa fa-user-plus" aria-hidden="true"></i>Register</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Navigation -->

        <div class="main_nav_container">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 text-right">
                        <div class="logo_container">
                            <a href="#">ODO<span>RA</span></a>
                        </div>
                        <nav class="navbar">
                            <ul class="navbar_menu">
                                <li><a href="#">home</a></li>
                                <li><a href="#">femme</a></li>
                                <li><a href="#">homme</a></li>
                                <li><a href="contact.html">contact</a></li>
                            </ul>
                            <ul class="navbar_user">
                                <li><a href="#"><i class="fa fa-search" aria-hidden="true"></i></a></li>
                                <li><a href="#"><i class="fa fa-user" aria-hidden="true"></i></a></li>
                                <li class="checkout">
                                    <a href="#">
                                        <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                                        <span id="checkout_items" class="checkout_items">2</span>
                                    </a>
                                </li>
                            </ul>
                            <div class="hamburger_container">
                                <i class="fa fa-bars" aria-hidden="true"></i>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>

    </header>

    <div class="fs_menu_overlay"></div>
    <div class="hamburger_menu">
        <div class="hamburger_close"><i class="fa fa-times" aria-hidden="true"></i></div>
        <div class="hamburger_menu_content text-right">
            <ul class="menu_top_nav">
                <li class="menu_item has-children">
                    <a href="#">
                        usd
                        <i class="fa fa-angle-down"></i>
                    </a>
                    <ul class="menu_selection">
                        <li><a href="#">cad</a></li>
                        <li><a href="#">aud</a></li>
                        <li><a href="#">eur</a></li>
                        <li><a href="#">gbp</a></li>
                    </ul>
                </li>
                <li class="menu_item has-children">
                    <a href="#">
                        English
                        <i class="fa fa-angle-down"></i>
                    </a>
                    <ul class="menu_selection">
                        <li><a href="#">French</a></li>
                        <li><a href="#">Italian</a></li>
                        <li><a href="#">German</a></li>
                        <li><a href="#">Spanish</a></li>
                    </ul>
                </li>
                <li class="menu_item has-children">
                    <a href="#">
                        My Account
                        <i class="fa fa-angle-down"></i>
                    </a>
                    <ul class="menu_selection">
                        <li><a href="#"><i class="fa fa-sign-in" aria-hidden="true"></i>Sign In</a></li>
                        <li><a href="#"><i class="fa fa-user-plus" aria-hidden="true"></i>Register</a></li>
                    </ul>
                </li>
                <li class="menu_item"><a href="#">home</a></li>
                <li class="menu_item"><a href="#">men</a></li>
                <li class="menu_item"><a href="#">women</a></li>
                <li class="menu_item"><a href="#">contact</a></li>
            </ul>
        </div>
    </div>

    <!-- Slider -->

    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>

    <div>
        <h1>Ajouter un gérant</h1>
        <br>
        <br>


        <form action="/gerant/add" method="post">
            <div class="flex-container">
                <div class="inputField">
                    <div>
                        <label for="username">username:</label>
                        <input type="text" name="username" id="username" required>
                    </div>
                    <div>
                        <label for="password">password:</label>
                        <input type="password" name="password" id="password" required>
                    </div>
                    <div>
                        <label for="sexe">Sexe :</label>
                        <select name="sexe" id="sexe" required>
                            <option value="">Sélectionnez votre sexe</option>
                            <option value="Homme">Homme</option>
                            <option value="Femme">Femme</option>
                        </select>
                    </div>
                    <div>
                        <label for="adresse">adresse:</label>
                        <input type="text" name="adresse" id="adresse" required>
                    </div>
                    <div>
                        <label for="tel">tel:</label>
                        <input type="number" name="tel" id="tel" minlength="10" required>
                    </div>
                    <div>
                        <label for="email">email:</label>
                        <input type="email" name="email" id="email" required>
                    </div>
                    <div>
                        <label for="Type">Type :</label>
                        <select name="Type" id="Type" required>
                            <option value="">Sélectionnez </option>
                            <option value="ADMIN">ADMIN</option>
                            <option value="GERANT">GERANT</option>
                        </select>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary submit">Soumettre</button>
                    </div>
                </div>
            </div>
        </form>

        <form>
            <table class="table table-striped table-hover mt-3 text-center table-bordered">

                <thead>
                <tr>
                    <th>Id</th>
                    <th>username</th>
                    <th>password</th>
                    <th>sexe</th>
                    <th>adresse</th>
                    <th>tel</th>
                    <th>email</th>
                    <th>type</th>
                    <th>Action</th>
                </tr>
                </thead>

                <tbody>

                <tr th:each="utilisateur : ${utilisateurs}">
                    <td th:text="${utilisateur.id}"></td>
                    <td th:text="${utilisateur.username}"></td>
                    <td th:text="${utilisateur.password}"></td>
                    <td th:text="${utilisateur.sexe}"></td>
                    <td th:text="${utilisateur.adresse}"></td>
                    <td th:text="${utilisateur.tel}"></td>
                    <td th:text="${utilisateur.email}"></td>
                    <td th:text="${utilisateur.Type}"></td>
                    <td>
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#editUSERModal" data-id="1">
                            <i class="bi bi-pencil-square"></i>
                        </button>
                        <a th:href="@{/gerant/delete/{id}(id=${utilisateur.id})}" class="btn btn-danger" onclick="return confirm('Voulez-vous vraiment supprimer cet utilisateur ?')">
                            <i class="bi bi-trash"></i>
                        </a>
                    </td>
                </tr>
                </tbody>

            </table>
        </form>


        <div class="modal fade" id="editUSERModal" tabindex="-1" role="dialog" aria-labelledby="editUSERModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="editUSERModalLabel">Modifier le gérant</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="editUSERForm">
                            <fieldset>
                                <legend>Informations de connexion</legend>
                                <div class="form-group row">
                                    <label for="username1" class="col-sm-3 col-form-label">Nom:</label>
                                    <div class="col-sm-9">
                                        <input type="text" name="username1" id="username1" class="form-control" required>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="password1" class="col-sm-3 col-form-label">Password:</label>
                                    <div class="col-sm-9">
                                        <input type="password" name="password1" id="password1" class="form-control" required>
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset>
                                <legend>Informations personnelles</legend>
                                <div class="form-group row">
                                    <label for="sexe1" class="col-sm-3 col-form-label">Sexe:</label>
                                    <div class="col-sm-9">
                                        <select name="sexe" id="sexe1" class="form-control" required>
                                            <option value="">Sélectionnez votre sexe</option>
                                            <option value="Homme">Homme</option>
                                            <option value="Femme">Femme</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="adresse1" class="col-sm-3 col-form-label">Adresse</label>
                                    <div class="col-sm-9">
                                        <input type="text" name="adresse1" id="adresse1" class="form-control" required>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="tel1" class="col-sm-3 col-form-label">Tel:</label>
                                    <div class="col-sm-9">
                                        <input type="number" name="tel1" id="tel1" class="form-control" minlength="10" required>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="email1" class="col-sm-3 col-form-label">Email:</label>
                                    <div class="col-sm-9">
                                        <input type="email" name="email1" id="email1" class="form-control" required>
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset>
                                <legend>Type de compte</legend>
                                <div class="form-group row">
                                    <label for="Type1" class="col-sm-3 col-form-label">Type:</label>
                                    <div class="col-sm-9">
                                        <select name="Type" id="Type1" class="form-control" required>
                                            <option value="">Sélectionnez </option>
                                            <option value="ADMIN">Admin</option>
                                            <option value="GERANT">gérant</option>
                                        </select>
                                    </div>
                                </div>
                            </fieldset>

                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                        <button type="button" class="btn btn-primary" id="saveChangesBtn">Enregistrer les modifications</button>
                    </div>
                </div>
            </div>
        </div>


        <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <script src="js/app.js"></script>

    <!-- Benefit -->

    <div class="benefit">
        <div class="container">
            <div class="row benefit_row">
                <div class="col-lg-3 benefit_col">
                    <div class="benefit_item d-flex flex-row align-items-center">
                        <div class="benefit_icon"><i class="fa fa-truck" aria-hidden="true"></i></div>
                        <div class="benefit_content">
                            <h6>free shipping</h6>
                            <p>Suffered Alteration in Some Form</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 benefit_col">
                    <div class="benefit_item d-flex flex-row align-items-center">
                        <div class="benefit_icon"><i class="fa fa-money" aria-hidden="true"></i></div>
                        <div class="benefit_content">
                            <h6>cach on delivery</h6>
                            <p>The Internet Tend To Repeat</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 benefit_col">
                    <div class="benefit_item d-flex flex-row align-items-center">
                        <div class="benefit_icon"><i class="fa fa-undo" aria-hidden="true"></i></div>
                        <div class="benefit_content">
                            <h6>45 days return</h6>
                            <p>Making it Look Like Readable</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 benefit_col">
                    <div class="benefit_item d-flex flex-row align-items-center">
                        <div class="benefit_icon"><i class="fa fa-clock-o" aria-hidden="true"></i></div>
                        <div class="benefit_content">
                            <h6>opening all week</h6>
                            <p>8AM - 09PM</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Footer -->

    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="footer_nav_container d-flex flex-sm-row flex-column align-items-center justify-content-lg-start justify-content-center text-center">
                        <ul class="footer_nav">

                            <li><a href="#">FAQs</a></li>
                            <li><a href="contact.html">Contact us</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="footer_social d-flex flex-row align-items-center justify-content-lg-end justify-content-center">
                        <ul>
                            <li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
                            <li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
                            <li><a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
                            <li><a href="#"><i class="fa fa-skype" aria-hidden="true"></i></a></li>
                            <li><a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="footer_nav_container">
                        <div class="cr">©2024 All Rights Reserverd. Made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="#">odora</a></div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

</div>
</div>





<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script src="js/jquery-3.2.1.min.js"></script>
<script src="styles/bootstrap4/popper.js"></script>
<script src="styles/bootstrap4/bootstrap.min.js"></script>
<script src="plugins/Isotope/isotope.pkgd.min.js"></script>
<script src="plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
<script src="plugins/easing/easing.js"></script>
<script src="js/custom.js"></script>


<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<!-- Bootstrap JS -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>

    // Lorsque le bouton "Modifier" est cliqué
    $('.btn.btn-primary').click(function() {

        var userId = $(this).data('id');


        loadUSERData(userId);
    });


    function loadUSERData(userId) {

        // par exemple, à l'aide d'une requête AJAX
        $.ajax({
            url: '/gerant/' + userId,
            method: 'GET',
            data: { id: userId },
            success: function(response) {

                $('#username').val(response.username);
                $('#password').val(response.password);
                $('#sexe').val(response.sexe);
                $('#adresse').val(response.adresse);
                $('#tel').val(response.tel);
                $('#email').val(response.email);
                $('#Type1').val(response.Type1);
            },
            error: function(xhr, status, error) {
                // Gérez les erreurs ici
                console.error(error);
            }
        });
    }

    // Lorsque le bouton "Enregistrer les modifications" est cliqué
    $('#saveChangesBtn').click(function() {
        // Récupérer les données du formulaire
        var formData = $('#editUSERForm').serialize();


        var usertId = $(this).data('id');

        // Envoyer les données du formulaire au backend pour enregistrer les modifications
        $.ajax({
            url: '/gerant/' + userId + '/edit',
            method: 'POST',
            data: formData,
            success: function(response) {
                // Gérer la réponse du backend, par exemple afficher un message de succès
                alert('Les modifications ont été enregistrées avec succès !');
                // Recharger la page ou effectuer d'autres actions si nécessaire
            },
            error: function(xhr, status, error) {
                // Gérer les erreurs ici, par exemple afficher un message d'erreur
                alert('Une erreur est survenue lors de l\'enregistrement des modifications.');
                console.error(error);
            }
        });
    });

</script>

</body>
</html>